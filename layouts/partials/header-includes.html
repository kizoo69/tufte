<!-- Preconnect to critical third-party origins -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />

<!-- Preload critical fonts to start download before CSS parsing -->
<link rel="preload" href="/fonts/chosun/ChosunGu.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/mona-sans/Mona-Sans.woff2" as="font" type="font/woff2" crossorigin>

<!-- modern-normalize: preload + load -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.1.0/modern-normalize.min.css" as="style" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.1.0/modern-normalize.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Google Fonts with font-display: swap for FOUT prevention -->
<!-- https://csswizardry.com/2020/05/the-fastest-google-fonts/#google-fonts-async-snippet -->
<link rel="preload" as="style"
      href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Serif+SC:wght@400;700&family=Noto+Emoji&display=swap" />
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Serif+SC:wght@400;700&family=Noto+Emoji&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Serif+SC:wght@400;700&family=Noto+Emoji&display=swap" />
</noscript>

{{ $htoptions := (dict "targetPath" "/css/hugo-tufte.min.css" "outputStyle" "compressed" "enableSourceMap" true) }}
{{ $htstyle := resources.Get "scss/hugo-tufte.scss"| resources.ExecuteAsTemplate "main.scss" .  | css.Sass $htoptions }}

{{ $ht_o_options := (dict "targetPath" "/css/hugo-tufte-options.min.css" "outputStyle" "compressed" "enableSourceMap" true) }}
{{ $ht_o_style := resources.Get "scss/hugo-tufte-options.scss"| resources.ExecuteAsTemplate "main.scss" .  | css.Sass $ht_o_options }}

{{/* Custom site-wide CSS via Hugo asset pipeline with template execution */}}
{{ $customOptions := (dict "targetPath" "/css/custom.min.css" "outputStyle" "compressed" "enableSourceMap" true) }}
{{ $customStyle := resources.Get "css/custom.scss" | resources.ExecuteAsTemplate "custom.scss" . | css.Sass $customOptions }}

<!-- Preload CSS to start download early -->
<link rel="preload" href="{{ $htstyle.Permalink | relURL }}" as="style">
<link rel="preload" href="{{ $ht_o_style.Permalink | relURL }}" as="style">

<!-- Load stylesheets -->
<link rel="stylesheet" href="{{ $htstyle.Permalink | relURL }}">
<link rel="stylesheet" href="{{ $ht_o_style.Permalink | relURL }}">
<link rel="stylesheet" href="{{ $customStyle.Permalink | relURL }}">
